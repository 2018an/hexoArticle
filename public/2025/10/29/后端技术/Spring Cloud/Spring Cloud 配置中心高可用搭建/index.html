<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Spring Cloud 配置中心高可用搭建 | 只有那年胜过年年</title><meta name="author" content="2025"><meta name="copyright" content="2025"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#FC5531"><meta name="description" content="本文通过config server连接git仓库来实现配置中心，除了git还可以使用svn或者系统本地目录都行。 引入依赖&lt;dependencies&gt;     &lt;dependency&gt; 		&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt; 		&lt;artifactId&gt;spring-clou">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Cloud 配置中心高可用搭建">
<meta property="og:url" content="http://example.com/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E9%AB%98%E5%8F%AF%E7%94%A8%E6%90%AD%E5%BB%BA/index.html">
<meta property="og:site_name" content="只有那年胜过年年">
<meta property="og:description" content="本文通过config server连接git仓库来实现配置中心，除了git还可以使用svn或者系统本地目录都行。 引入依赖&lt;dependencies&gt;     &lt;dependency&gt; 		&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt; 		&lt;artifactId&gt;spring-clou">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/logo.png">
<meta property="article:published_time" content="2025-10-29T09:30:25.000Z">
<meta property="article:modified_time" content="2025-10-29T09:33:56.649Z">
<meta property="article:author" content="2025">
<meta property="article:tag" content="Spring Cloud">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/logo.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Spring Cloud 配置中心高可用搭建",
  "url": "http://example.com/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E9%AB%98%E5%8F%AF%E7%94%A8%E6%90%AD%E5%BB%BA/",
  "image": "http://example.com/img/logo.png",
  "datePublished": "2025-10-29T09:30:25.000Z",
  "dateModified": "2025-10-29T09:33:56.649Z",
  "author": [
    {
      "@type": "Person",
      "name": 2025,
      "url": "http://example.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E9%AB%98%E5%8F%AF%E7%94%A8%E6%90%AD%E5%BB%BA/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#FC5531')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#FC5531')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: 2025","link":"链接: ","source":"来源: 只有那年胜过年年","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Spring Cloud 配置中心高可用搭建',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/logo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">357</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.png" alt="Logo"><span class="site-name">只有那年胜过年年</span></a><a class="nav-page-title" href="/"><span class="site-name">Spring Cloud 配置中心高可用搭建</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Spring Cloud 配置中心高可用搭建</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-10-29T09:30:25.000Z" title="发表于 2025-10-29 17:30:25">2025-10-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-29T09:33:56.649Z" title="更新于 2025-10-29 17:33:56">2025-10-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><p>本文通过config server连接git仓库来实现配置中心，除了git还可以使用svn或者系统本地目录都行。</p>
<h2 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h2><pre class="line-numbers language-none"><code class="language-none">&lt;dependencies&gt;
    &lt;dependency&gt;
		&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;
		&lt;artifactId&gt;spring-cloud-config-server&lt;&#x2F;artifactId&gt;
	&lt;&#x2F;dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;
		&lt;artifactId&gt;spring-cloud-starter-eureka&lt;&#x2F;artifactId&gt;
	&lt;&#x2F;dependency&gt;
&lt;&#x2F;dependencies&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>spring-cloud-config-server这个就是配置中心server的依赖。</p>
<p>配置中心做到高可用本身也需要向注册中心注册自己的实例，所以需求引用spring-cloud-starter-eureka依赖。</p>
<h2 id="添加启动类，开启Config-Server功能"><a href="#添加启动类，开启Config-Server功能" class="headerlink" title="添加启动类，开启Config Server功能"></a>添加启动类，开启Config Server功能</h2><pre class="line-numbers language-none"><code class="language-none">@EnableDiscoveryClient
@EnableConfigServer
@SpringBootApplication
public class ConfigApplication &#123;

	public static void main(String[] args) &#123;
		SpringApplication.run(ConfigApplication.class, args);
	&#125;

&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>@EnableConfigServer</code>：即开启配置服务器的功能。</p>
<p><code>@EnableDiscoveryClient</code>：开启自动注册客户端，默认情况下，ServiceRegistry实现将自动注册正在运行的服务。如注册中心使用是Eureka，这里也可以使用的@EnableEurekaClient注解。</p>
<h2 id="添加Config配置"><a href="#添加Config配置" class="headerlink" title="添加Config配置"></a>添加Config配置</h2><pre class="line-numbers language-none"><code class="language-none">spring: 
  application:
    name: config-center
  profiles:
    active: config-center1
  cloud: 
    config:
      server:
        git:
          uri: $&#123;git.uri&#125;
          searchPaths: $&#123;git.searchPaths&#125;
          username: $&#123;git.username&#125;
          password: $&#123;git.password&#125;
          basedir: $&#123;git.basedir&#125;
          clone-on-start: true
          force-pull: true
          
eureka:
  instance: 
    prefer-ip-address: true  
    instance-id: $&#123;spring.cloud.client.ipAddress&#125;:$&#123;server.port&#125;
    lease-expiration-duration-in-seconds: $&#123;lease-expiration-duration-in-seconds&#125;
    lease-renewal-interval-in-seconds: $&#123;lease-renewal-interval-in-seconds&#125;
  client:
    serviceUrl:
      defaultZone: $&#123;register-center.urls&#125;
    
---
spring:
  profiles: config-center1
  
server: 
  port: $&#123;config-center1.server.port&#125;

---
spring: 
  profiles: config-center2
  
server: 
  port: $&#123;config-center2.server.port&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这里配置了两台Config Server，都注册到了两台注册中心上。</p>
<h2 id="Maven-filter配置"><a href="#Maven-filter配置" class="headerlink" title="Maven filter配置"></a>Maven filter配置</h2><pre class="line-numbers language-none"><code class="language-none">#git
git.uri&#x3D;http:&#x2F;&#x2F;gitlab.example.com&#x2F;test&#x2F;config.git
git.username&#x3D;root
git.password&#x3D;root
git.searchPaths&#x3D;config-center
git.basedir&#x3D;f:&#x2F;config&#x2F;config-center&#x2F;git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="Spring-Cloud-Git配置详解"><a href="#Spring-Cloud-Git配置详解" class="headerlink" title="Spring Cloud Git配置详解"></a>Spring Cloud Git配置详解</h2><p>**<code>spring.cloud.config.server.git.uri</code>**：git仓库地址。</p>
<p>**<code>spring.cloud.config.server.git.searchPaths</code>**：git仓库搜索目录。</p>
<p>**<code>spring.cloud.config.server.git.username</code>**：连接git的用户名。</p>
<p>**<code>spring.cloud.config.server.git.password</code>**：连接git的用户名密码。</p>
<p>**<code>spring.cloud.config.server.git.basedir</code>**：配置中心在本地缓存配置的目录。</p>
<p>**<code>spring.cloud.config.server.git.clone-on-start</code>**：配置为true表示启动时就克隆配置缓存到本地。</p>
<p>**<code>spring.cloud.config.server.git.force-pull</code>**：配置为true表示如果本地副本是脏的，将使Spring Cloud Config Server强制从远程存储库拉取配置。</p>
<h2 id="启动配置中心"><a href="#启动配置中心" class="headerlink" title="启动配置中心"></a>启动配置中心</h2><p>分别启动以下配置中心，使用不同的Profile指定端口。</p>
<pre class="line-numbers language-none"><code class="language-none">spring-boot:run -Drun.profiles&#x3D;config-center1 -P dev
spring-boot:run -Drun.profiles&#x3D;config-center2 -P dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">2025</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E9%AB%98%E5%8F%AF%E7%94%A8%E6%90%AD%E5%BB%BA/">http://example.com/2025/10/29/后端技术/Spring Cloud/Spring Cloud 配置中心高可用搭建/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">只有那年胜过年年</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring-Cloud/">Spring Cloud</a></div><div class="post-share"><div class="social-share" data-image="/img/logo.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE/" title="Spring Cloud 配置中心客户端读取配置"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Spring Cloud 配置中心客户端读取配置</div></div><div class="info-2"><div class="info-item-1">微服务连接配置中心来实现外部配置的读取。 引入依赖&lt;dependencies&gt; 	&lt;dependency&gt; 		&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt; 		&lt;artifactId&gt;spring-cloud-starter-eureka&lt;&#x2F;artifactId&gt; 	&lt;&#x2F;dependency&gt; 	&lt;dependency&gt; 		&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt; 		&lt;artifactId&gt;spring-cloud-starter-config&lt;&#x2F;artifactId&gt; 	&lt;&#x2F;dependency&gt; 	&lt;dependency&gt; 		&lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt; 		&l...</div></div></div></a><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/%E5%8E%89%E5%AE%B3%E4%BA%86%EF%BC%8CSpring%20Cloud%20for%20Alibaba%20%E6%9D%A5%E4%BA%86%EF%BC%81/" title="厉害了，Spring Cloud for Alibaba 来了！"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">厉害了，Spring Cloud for Alibaba 来了！</div></div><div class="info-2"><div class="info-item-1">最近，Spring Cloud 发布了 Spring Cloud Alibaba 首个预览版本：Spring Cloud for Alibaba 0.2.0. 大家都好奇，这和阿里巴巴有什么关系？莫非是给阿里巴巴定制了一个 Spring Cloud ? 其实也差不多，栈长带大家来看下这到底是个什么鬼？ Spring Cloud for Alibaba 是什么鬼？ 官宣：https://spring.io/blog/2018/10/30/spring-cloud-for-alibaba-0-2-0-released  官方定义如下：  The Spring Cloud Alibaba project, consisting of Alibaba’s open-source components and several Alibaba Cloud products, aims to implement and expose well known Spring Framework patterns and abstractions to bring the benefits of Sp...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20@RefreshScope%20%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" title="Spring Cloud @RefreshScope 原理是什么？"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-10-31</div><div class="info-item-2">Spring Cloud @RefreshScope 原理是什么？</div></div><div class="info-2"><div class="info-item-1">要清楚RefreshScope,先要了解ScopeScope(org.springframework.beans.factory.config.Scope)是Spring 2.0开始就有的核心的概念 RefreshScope(org.springframework.cloud.context.scope.refresh)是spring cloud提供的一种特殊的scope实现，用来实现配置、实例热加载。 Scope -&gt; GenericScope -&gt; RefreshScope  Scope与ApplicationContext生命周期 AbstractBeanFactory#doGetBean创建Bean实例 protected &lt;T&gt; T doGetBean(...)&#123;     final RootBeanDefinition mbd &#x3D; ...     if (mbd.isSingleton()) &#123;         ...     &#125; else if (mbd.isPrototype())        .....</div></div></div></a><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20Eureka%20%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%EF%BC%8CGreenwich%20%E6%9C%80%E6%96%B0%E7%89%88%EF%BC%81/" title="Spring Cloud Eureka 注册中心集群搭建，Greenwich 最新版！"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-10-31</div><div class="info-item-2">Spring Cloud Eureka 注册中心集群搭建，Greenwich 最新版！</div></div><div class="info-2"><div class="info-item-1">Spring Cloud 的注册中心可以由 Eureka、Consul、Zookeeper、ETCD 等来实现，这里推荐使用 Spring Cloud Eureka 来实现注册中心，它基于 Netflix 的 Eureka 做了二次封装，完成分布式服务中服务治理的功能，微服务系统中的服务注册与发现都通过这个注册中心来进行管理。 今天栈长就来分享一个 Eureka 注册中心玩法，从 0 到分布式集群一步到位，单机版的咱就不玩了，没意义。 本文基于最新的 Spring Cloud Greenwich.SR1 以及 Spring Boot 2.1.3 版本进行分享。 快速构建一个 Eureka Server 项目打开 Spring 的快速构建网址，如下图所示，选择对应的参数，最后选择 Eureka Server 依赖，生成项目示例代码即可。  https://start.spring.io/    栈长这里是生成了一个 Maven 示例项目。 &lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&g...</div></div></div></a><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20Alibaba%20Sentinel%20%E6%95%B4%E5%90%88%20Feign%20%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%AE%9E%E7%8E%B0/" title="Spring Cloud Alibaba Sentinel 整合 Feign 的设计实现"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-10-31</div><div class="info-item-2">Spring Cloud Alibaba Sentinel 整合 Feign 的设计实现</div></div><div class="info-2"><div class="info-item-1">  作者 | Spring Cloud Alibaba 高级开发工程师洛夜来自公众号阿里巴巴中间件投稿   前段时间 Hystrix 宣布不再维护之后（Hystrix 停止开发。。。Spring Cloud 何去何从？），Feign 作为一个跟 Hystrix 强依赖的组件，必然会有所担心后续的使用。 作为 Spring Cloud Alibaba 体系中的熔断器 Sentinel，Sentinel 目前整合了 Feign，本文对整合过程做一次总结，欢迎大家讨论和使用。 Feign 是什么？Feign 是一个 Java 实现的 Http 客户端，用于简化 Restful 调用。 Feign 跟 OkHttp、HttpClient 这种客户端实现理念不一样。Feign 强调接口的定义，接口中的一个方法对应一个 Http 请求，调用方法即发送一个 Http 请求；OkHttp 或 HttpClient 以过程式的方式发送 Http 请求。Feign 底层发送请求的实现可以跟 OkHttp 或 HttpClient 整合。 要想整合 Feign，首先要了解 Feign 的使用以及执行过...</div></div></div></a><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20Eureka%20%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%EF%BC%8C%E5%BB%BA%E8%AE%AE%E6%94%B6%E8%97%8F%EF%BC%81/" title="Spring Cloud Eureka 常用配置详解，建议收藏！"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-10-31</div><div class="info-item-2">Spring Cloud Eureka 常用配置详解，建议收藏！</div></div><div class="info-2"><div class="info-item-1">前几天，栈长分享了 《Spring Cloud Eureka 注册中心集群搭建，Greenwich 最新版！》，今天来分享下 Spring Cloud Eureka 常用的一些参数配置及说明。 Spring Cloud Eureka 主要分为下面三个模块的参数：  Eureka Server Eureka Client Eureka Instance  Eureka ServerEureka Server 的配置参数格式：eureka.server.xxx。 enable-self-preservation表示注册中心是否开启服务的自我保护能力。 renewal-percent-threshold表示 Eureka Server 开启自我保护的系数，默认：0.85。 eviction-interval-timer-in-ms表示 Eureka Server 清理无效节点的频率，默认 60000 毫秒（60 秒）。 更多 Eureka Server 参数配置可以看一下这个类：  org.springframework.cloud.netflix.eureka.server.Eure...</div></div></div></a><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20Eureka%20%E8%87%AA%E6%88%91%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6%E5%AE%9E%E6%88%98%E5%88%86%E6%9E%90/" title="Spring Cloud Eureka 自我保护机制实战分析"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-10-31</div><div class="info-item-2">Spring Cloud Eureka 自我保护机制实战分析</div></div><div class="info-2"><div class="info-item-1">其中，可能大家关于自我机制的具体保护逻辑还不是特别清楚，今天栈长就具体分析和实战一下，自我保护机制到底是怎么工作的。 现在我们把保护机制开启：  关注右上角的两个重要参数：    参数 说明    Renews threshold Eureka Server 期望每分钟收到客户端实例的总心跳数   Renews (last min) Eureka Server 最后一分钟收到的总心跳数   我这里显示的数值如下： Renews threshold	6 Renews (last min)	8  这个 6 和 8 分别是怎么算出来的？ 先来看这两个参数的默认设置，摘自《Spring Cloud Eureka 常用配置详解》一文：  eureka.server.renewal-percent-threshold：表示 Eureka Server 开启自我保护的系数，默认：0.85。   eureka.instance.lease-renewal-interval-in-seconds：表示 Eureka Client 向 Eureka Server 发送心跳的频率（默认 30 秒），如...</div></div></div></a><a class="pagination-related" href="/2025/10/29/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/Spring%20Cloud/Spring%20Cloud%20Eureka%20%E8%87%AA%E6%88%91%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/" title="Spring Cloud Eureka 自我保护机制"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-10-29</div><div class="info-item-2">Spring Cloud Eureka 自我保护机制</div></div><div class="info-2"><div class="info-item-1">自我保护背景首先对Eureka注册中心需要了解的是Eureka各个节点都是平等的，没有ZK中角色的概念， 即使N-1个节点挂掉也不会影响其他节点的正常运行。 默认情况下，如果Eureka Server在一定时间内（默认90秒）没有接收到某个微服务实例的心跳，Eureka Server将会移除该实例。但是当网络分区故障发生时，微服务与Eureka Server之间无法正常通信，而微服务本身是正常运行的，此时不应该移除这个微服务，所以引入了自我保护机制。 自我保护机制官方对于自我保护机制的定义：  https://github.com/Netflix/eureka/wiki/Understanding-Eureka-Peer-to-Peer-Communication  自我保护模式正是一种针对网络异常波动的安全保护措施，使用自我保护模式能使Eureka集群更加的健壮、稳定的运行。 自我保护机制的工作机制是如果在15分钟内超过85%的客户端节点都没有正常的心跳，那么Eureka就认为客户端与注册中心出现了网络故障，Eureka Server自动进入自我保护机制，此时会出现以下几种情况...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">1.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%90%AF%E5%8A%A8%E7%B1%BB%EF%BC%8C%E5%BC%80%E5%90%AFConfig-Server%E5%8A%9F%E8%83%BD"><span class="toc-number">2.</span> <span class="toc-text">添加启动类，开启Config Server功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0Config%E9%85%8D%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">添加Config配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven-filter%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">Maven filter配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Cloud-Git%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3"><span class="toc-number">5.</span> <span class="toc-text">Spring Cloud Git配置详解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83"><span class="toc-number">6.</span> <span class="toc-text">启动配置中心</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background: transparent;"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By 2025</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://walinecomments-fd4cgek65-chens-projects-7c4f92c5.vercel.app',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>